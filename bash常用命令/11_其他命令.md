# 11_其他命令

## 打包与压缩

Linux当中是可以把一大堆的文件和目录全部打包成一个文件，这对于备份文件或将几个文件组合成为一个文件以便于网络传输是非常有用的。使用`tar`命令可将文件进行打包。

使用方法：`tar [主选项+辅选项] 目标文档 原文件或目录`

- 主选项（使用的时候只能选其一）
  - c，create创建
  - r，追加
  - x，释放
- 辅选项
  - v，显示打包过程
  - f，指定生成的文件的名字
  - z，使用gzip压缩，如`tar cfvz packet.tar.gz file.*`
  - j，使用bzip2压缩，如`tar cfvj packet.tar.bz2 test.*`

- `tar cfv packet file.*`，只打包，包会预留一部分空间，后续可以将其他文件加入到这个包中。但是使用压缩后就不能追加文件了

- tar包设计成1024的整数倍
- （解）压缩到指定目录
  - `tar 主选项 附加选项 -C 压缩文件 目标目录`
  - `tar 主选项 附加选项C 压缩文件 目标文件`
  - `-C`，在执行任何操作之前更改为DIR
  - 上面的两种方式没有区别



## scp远程拷贝

远程拷贝之前，需要保证目标服务器是连通的

使用方法：`scp [选项] 源 目的`

- 源：文件路径
- 目的：用户名@ip地址：文件路径

如：使用scp命令从本机拷贝到远程服务器

`scp /home/user1/mydisk/file1 user2@114.138.14.17:~/`

如果是首次链接，还需要使用一个授权



## 链接

链接文件有两种，硬链接和软连接。

- 硬链接：硬链接是对磁盘分区上文件的一个别名，当所有硬链接文件全部清除后，文件将被垃圾回收。
- 软链接（符号链接）：软连接是一个特殊文件，其内容是另一文件的路径名的指向，当宿主文件删除时，软链接即失效。类似于C语言中的指针，Windows中的快捷方式。

硬链接和软链接的建立方法：

```shell
# 硬链接的建立
建立方法为： ln 文件名 硬链接名
# 给a.txt建立硬链接名为alink
ln a.txt alink

# 符号链接的建立
ls -s 文件名 软连接名
```



## alias别名

- 查看命令的别名

使用alias命令可以打印当前所使用的别名情况。一旦给命令起了别名，那么输入命令的别名就可以起到和原来命令一样的效果。

使用方法：`alias`直接输入命令，可以查看命令的别名情况。

- 给命令起别名

使用方法：`alias h=history`，但是这也是临时有效。可以在.bashrc中修改，这样就可以永久生效



## history命令

使用history命令可以获取输入命令的历史记录，在history命令后面添加> 文本文件，就可以将历史记录保存到文本文件中了。

使用方法：`history`或`history > 文件`



## 管道和命令替换

- 一次输入以后执行多条命令

输入完命令以后不输入回车键，而是键入**分号**，然后再输入下一条命令，就可以实现按顺序依次执行多条命令的效果。如：先cd到目录，再展示这个目录中的文件：`cd test; ls -l`

- 管道

管道是重定向的一种，就类似一个导管，将一个程序或命令的输出作为另一个程序或命令的输入

如：`ls /etc|wc -w`，首先是展示/etc下的文件情况，然后将这些文件名都作为wc命令的输入，来统计这些文件名共有多少个单词

- 命令替换

命令替换是将一个命令的输出作为另一个命令的**参数**

常用的格式为：

```shell
command1 `command2`
# command1是任意命令

command1 $(command2)

# 例子
# 首先列出当前的所有信息，并重定向到aa文件中：
ls|cat>aa
# 然后通过命令替换，列出aa文件中所有的文件信息
ls -l `cat aa`
# 或者用
ls -l $(cat aa)
```



## ssh协议的免密登录

**无密钥登录可以实现不使用密码登录**

每个用户的密钥存放在`~/.ssh/`里面，其中id_rsa是私钥，id_rsa.pub是公钥。

使用`ssh-keygen`来生成钥匙（后续操作一直按回车即可），然后会生成一对要是（这里是采用了非对称加密的算法），然后将公钥的内容拷贝到目标机器的.ssh/authorized_keys文件里面（如果目标机器没有这个文件，则需要创建）

1. 使用scp命令拷贝目标主机
2. 登陆到目标主机（ssh 用户名@ip地址）
3. 使用cat打开公钥，然后使用>>追加到授权文件里面

- 注意：使用无密钥登录是单向的，并且本机的私钥不能移动位置或者修改
- 使用ssh命令可以远程执行命令：`ssh 用户名@ip地址 "命令"`





## time和其他一些命令

- time命令

`time ./可执行程序`，看做这件事情的时间，real：用户真正体验的时间，此外还有user，sys

- `./可执行程序|wc -l`看打印输出多少行