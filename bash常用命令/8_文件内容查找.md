# 8_文件内容查找

## 搜索文件内容

使用`grep`命令可以查找文件内容

`grep [选项][查找模式][文件名1，文件名2，...]`

- grep过滤器查找指定字符模式的文件，并显示含有此模式的所有行，符合规则的所有模式会显示为红色。被寻找的模式称为正则表达式。
- 选项中使用-E，可以使用拓展正则表达式规则，否则默认采用基本规则
- 其他参数：
  - -F，每个模式作为固定的字符串对待
  - -c，只显示匹配行的数量
  - -i，比较式不区分大小写
  - -n，在输出前加上匹配串所在的行号



## 正则表达式

和find命令使用的通配符有所区别，grep使用正则表达式的方式来进行模式匹配。正则表达式是利用通配符（特殊字符）来定义了规则，从而和文本进行匹配。grep命令的目标就是找符合规则的字符串集合。

正则表达式的语法：

1. 单个字符是匹配的基本单位，比如a就能够匹配含有字母的字符串集合。几乎所有的字母和数字都能够匹配它们本身
2. 反斜杠+某些字符构成转义字符，它们作为整体可以看成是一个特殊的单个字符
3. 大部分的通配符规则：

```
a|b				  匹配a或b，使用-E
gr(a|e)y		  匹配gray或grey
.				  匹配任一字符
[abc]			  匹配任一字符：a或b或c
[^abc]			  匹配任一字符，但不包括a,b,c
[a-z]			  匹配从a到z之间的任一字符
[a-zA-Z]		  匹配从a到z，及从A到Z之间的任一字符
^表达式		  	匹配字符串的头部 使用-E
表达式$			匹配字符串的尾部 使用-E
( )				  匹配标记的子表达式 使用-E
\b				  匹配字词边界
\n				  匹配第n个标记的子表达式，n代表1到9
*				  匹配前一项内容0或多次
?				  匹配前一项内容0或1次 使用-E
+				  匹配前一项内容1或多次 使用-E
{x}				  匹配前一项内容x次
{x,}			  匹配前一项内容最少x次
{,x}			  匹配前一项内容最多x次
{x,y}			  匹配前一项内容次数介于x和y之间 使用-E			
\				  转义字符
```



## grep应用

grep的运行原理是打开文件，然后按行来读取文件内容，如果本行里面拥有匹配模板的字符串，那么就染色这个字符串，并打印输出

- 在C程序文件里面找到int开始的语句

`grep -n ^int main.c`

- 在C程序文件里面找到；结尾的语句

`grep -n \;$ main.c`

`grep -n ";$"  main.c`

- 查找结构体

`ccd /usr/include`

`grep "struct sockaddr_in {" * -nir`