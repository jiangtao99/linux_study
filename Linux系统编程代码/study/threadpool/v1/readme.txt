v1版本的退出不优雅，原因是当主进程给子进程发送要退出的信号时，子进程使用pthread_cancel()来取消子进程中的工作线程
那么当工作线程在工作时会，如传输文件的过程中，触发到取消点就会结束，导致了并没有给客户端发送0来让客户端退出
所以不够优雅
